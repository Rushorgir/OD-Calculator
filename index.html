<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>OD Manager â€” Login</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“…</text></svg>">
        <link rel="stylesheet" href="style.css" />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <script>
            // Apply theme from localStorage before page load to prevent flash
            (function() {
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = savedTheme || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-color-scheme', theme);
            })();
        </script>
    </head>
    <body class="login-page">
        <main style="min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem;">
            <div style="max-width:480px;width:100%;display:flex;justify-content:center;">
                <div class="card" style="width:100%;">
                    <div class="card__header">
                        <h2 style="margin:0">OD Manager</h2>
                        <p style="margin:6px 0 0;color:var(--color-text-secondary);font-size:13px">Sign in to manage your OD hours</p>
                    </div>
                    <div class="card__body">

                        <div id="authTabs" style="display:flex;gap:8px;margin-bottom:16px">
                            <button id="showLogin" class="btn" aria-pressed="true">Login</button>
                            <button id="showSignup" class="btn btn--secondary" aria-pressed="false">Sign up</button>
                        </div>

                        <!-- Login Form -->
                        <form id="loginForm" style="display:block">
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input id="loginEmail" type="email" class="form-control" placeholder="you@vitstudent.ac.in" required />
                            </div>
                            <div class="form-group password-wrapper">
                                <label class="form-label">Password</label>
                                <div class="password-field">
                                    <input id="loginPassword" type="password" class="form-control" placeholder="Enter your password" required />
                                    <i class="fa-solid fa-eye toggle-password" data-target="loginPassword"></i>
                                </div>
                            </div>
                            <div style="text-align:left;margin-top:6px;">
                                <a href="forgot-password.html" style="font-size:13px;color:#32b8c6;text-decoration:none;">Forgot password?</a>
                            </div>
                            <div style="margin:10px 0 20px 0; text-align:center; font-size:14px; color:var(--color-text-secondary);">
                                Don't have an account? 
                                <a href="javascript:void(0);" id="goToSignup" style="color:#32b8c6; text-decoration:none; font-weight:600;">Sign up here!</a>
                            </div>

                            <button type="submit" class="btn btn--primary btn--full-width">Log in</button>
                        </form>

                        <!-- Signup Form -->
                        <form id="signupForm" style="display:none">
                            <div class="form-group">
                                <label class="form-label">Name</label>
                                <input id="signupFullName" class="form-control" placeholder="Allison Burgers" required />
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input id="signupEmail" type="email" class="form-control" placeholder="you@vitstudent.ac.in" required />
                            </div>
                            <div class="form-group password-wrapper">
                                <div style="display:flex;justify-content:space-between;align-items:center;">
                                    <label class="form-label">Password</label>
                                    <a href="javascript:void(0);" id="generatePassword" style="font-size:12px;color:#32b8c6;text-decoration:none;font-weight:600;">Generate Password</a>
                                </div>
                                <div class="password-field">
                                    <input id="signupPassword" type="password" class="form-control" placeholder="Create your password (Atleast 6 characters)" required />
                                    <i class="fa-solid fa-eye toggle-password" data-target="signupPassword"></i>
                                </div>
                                <div id="passwordStrengthContainer" style="display:flex;align-items:center;gap:8px;margin-top:6px;">
                                    <span style="font-size:13px;color:var(--color-text-secondary);white-space:nowrap;">
                                        Strength Meter:
                                    </span>
                                    <div class="strength-meter">
                                        <div id="passwordStrength" class="strength-bar"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group password-wrapper">
                                <label class="form-label">Confirm Password</label>
                                <div class="password-field">
                                    <input id="signupConfirmPassword" type="password" class="form-control" placeholder="Retype your password" required />
                                    <i class="fa-solid fa-eye toggle-password" data-target="signupConfirmPassword"></i>
                                </div>
                                <small id="passwordMatch" class="password-match"></small>
                            </div>
                            <div style="margin:10px 0 20px 0; text-align:center; font-size:14px; color:var(--color-text-secondary);">
                                Already have an account? 
                                <a href="javascript:void(0);" id="goToLogin" style="color:#32b8c6; text-decoration:none; font-weight:600;">Log in here!</a>
                            </div>
                            <button type="submit" class="btn btn--primary btn--full-width">Create account</button>
                        </form>

                        <div style="margin-top:12px;text-align:center">
                            <small>You will stay signed in by default! Click the logout button to sign out.</small>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <div id="toastContainer" class="toast-container"></div>

        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
        <script src="supabase-config.js"></script>
        <script src="app.js"></script>
    </body>
</html>